(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const p=document.querySelector("#selectProduct"),d=document.querySelector("#createForm"),S=document.querySelector("#rowTemplate"),u=document.querySelector("#tbody"),v=document.querySelector("#totalAmount"),L=document.querySelector(".manage-inventory-btn"),T=document.querySelector(".manage-inventory"),P=document.querySelector(".close-inventory-btn"),x=document.querySelector("#productCardTemplate"),m=document.querySelector(".product-group"),a=document.querySelector("#createProductForm"),A=document.querySelector("#printBtn"),h=({name:e,price:n})=>{const o=x.content.cloneNode(!0),c=o.querySelector(".product-card-name"),t=o.querySelector(".product-card-price");return c.innerText=e,t.innerText=n,o},f=e=>{p.innerHTML="",m.innerHTML="",e.forEach(({id:n,name:o,price:c})=>{p.append(new Option(o,n)),m.append(h({name:o,price:c}))})},i=[{id:1,name:"Apple",price:600},{id:2,name:"Orange",price:500},{id:3,name:"Mango",price:1e3},{id:4,name:"Banana",price:200}],O=()=>{f(i)},F=({id:e,name:n,price:o},c)=>{const t=o*c,r=S.content.cloneNode(!0);r.querySelector(".product-id");const s=r.querySelector(".product-name"),g=r.querySelector(".product-price"),q=r.querySelector(".product-qty"),b=r.querySelector(".product-amount");return s.innerText=n,g.innerText=o,q.innerText=c,b.innerText=t,r.querySelector(".table-row").setAttribute("row-product-id",e),r},w=()=>{const e=u.querySelectorAll(".product-amount");v.innerText=[...e].reduce((n,{innerText:o})=>n+parseFloat(o),0)},I=e=>{confirm("Are you sure to delete?")&&(e.remove(),w())},l=(e,n)=>{const o=u.querySelector(`[row-product-id="${e}"]`),c=o.querySelector(".product-qty"),t=o.querySelector(".product-price"),r=o.querySelector(".product-amount");(n>0||c.innerText>1)&&(c.innerText=parseInt(c.innerText)+parseInt(n),r.innerText=c.innerText*t.innerText)},N=()=>{const e=()=>{w()},n={childList:!0,subtree:!0};new MutationObserver(e).observe(u,n)},E=e=>{e.preventDefault();const n=new FormData(d),o=parseInt(n.get("select_product")),c=n.get("input_Quantity"),t=i.find(s=>s.id===o),r=u.querySelector(`[row-product-id="${o}"]`);r?l(r.getAttribute("row-product-id"),c):u.append(F(t,c)),d.reset()},D=e=>{e.target.classList.contains("row-del-btn")?I(e.target.closest(".table-row")):e.target.classList.contains("row-q-add")?l(e.target.closest(".table-row").getAttribute("row-product-id"),1):e.target.classList.contains("row-q-sub")&&l(e.target.closest(".table-row").getAttribute("row-product-id"),-1)},y=()=>{T.classList.toggle("-translate-x-full")},B=e=>{e.preventDefault();const n=new FormData(a),o=n.get("item-name"),c=parseInt(n.get("item-price")),t={id:Date.now(),name:o,price:c};i.push(t),f(i),a.reset()},C=()=>{window.print()};function H(){d.addEventListener("submit",E),u.addEventListener("click",D),L.addEventListener("click",y),P.addEventListener("click",y),a.addEventListener("submit",B),A.addEventListener("click",C)}const M=()=>{N()};class R{init(){console.log("start invoice app..."),O(),H(),M()}}const Q=new R;Q.init();
